stages:
  - test
  - lint

# Упрощенная конфигурация без сложных сервисов
test-python:
  stage: test
  image: python:3.9-alpine
  script:
    - python --version
    - pip install -r requirements.txt
    - python main.py
    - echo "Python test completed successfully"
  tags:
    - docker

lint-python:
  stage: lint
  image: python:3.9-alpine
  script:
    - pip install pylint
    - pylint --exit-zero main.py || echo "Linting completed with warnings"
  tags:
    - docker

simple-test:
  stage: test
  image: alpine:latest
  script:
    - echo "Hello from GitLab CI/CD!"
    - echo "Runner is working correctly"
    - echo "Project: $CI_PROJECT_NAME"
    - echo "Branch: $CI_COMMIT_REF_NAME"
  tags:
    - docker

# Тест с Docker (упрощенный)
docker-version:
  stage: test
  image: docker:24-alpine
  script:
    - docker --version
    - echo "Docker command is available"
  tags:
    - docker
